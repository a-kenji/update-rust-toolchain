name: 'Update rust-toolchain file'
description: 'Updates the rust-toolchain file'
author: 'Alex Kenji Berthold'
inputs:
  minor-version-delta:
    description: 'The delta for the minor version.'
    required: false
    default: 0
  update-patch:
    description: 'Update patch versions.'
    required: false
    default: true
  update-minor:
    description: 'Update minor versions.'
    required: false
    default: true
  toolchain-path:
    description: 'Path to the rust-toolchain file.'
    required: false
    default: './rust-toolchain'
  blurb:
    description: 'Text prepended to the rust-toolchain file.'
    required: false
    default: 'This file is generated by update-rust-toolchain.'

runs:
  using: "composite"
  steps:
    - run: ./update-toolchain.sh
      shell: bash
      env:
        TOOLCHAIN_FILE: ${{ inputs.toolchain-path }}
        INPUTS_UPDATE_PATCH: ${{ inputs.update-patch }}
        INPUTS_UPDATE_MINOR: ${{ inputs.update-minor }}
        MINOR_VERSION_DELTA: ${{ inputs.minor-version-delta }}
        BLURB: ${{ inputs.blurb}}
   #- name: Create Pull Request
    #id: cpr
    #uses: peter-evans/create-pull-request@v3
    #with:
    #

  branding:
    icon: file-text
    color: pink
