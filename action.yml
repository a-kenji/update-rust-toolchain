name: 'Update rust-toolchain file'
description: 'Updates the rust-toolchain file'
author: 'Alex Kenji Berthold'
inputs:
  minor-version-delta:
    description: 'The delta for the minor version.'
    required: false
    default: 0
  patch-version:
    description: 'Update patch versions.'
    required: false
    default: true
  toolchain-path:
    description: 'Path to the rust-toolchain file.'
    required: false
    default: './rust-toolchain'
  blurb:
    description: 'Text prepended to the rust-toolchain file.'
    required: false
    default: 'This file is generated by update-rust-toolchain.'

runs:
  using: "composite"
  steps:
    #- id: install-nix
      #name: install nix
      #uses: cachix/install-nix-action@v16
    #- run: nix profile install nixpkgs#jq
    #- run: nix profile install nixpkgs#curl
    - run: ./update-toolchain.sh ${{ inputs.toolchain-path }} ${{ inputs.minor-version-delta }} ${{ inputs.blurb}}
      shell: bash
      #- name: Create Pull Request
    #id: cpr
    #uses: peter-evans/create-pull-request@v3
    #with:
